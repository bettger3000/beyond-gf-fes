<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>æœ€çµ‚ç®¡ç†ç”»é¢ - 2025/09/04</title>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
</head>
<body>

<div style="font-family:Arial,sans-serif;padding:20px;background:#f5f5f5;min-height:100vh;">
  <h1 style="text-align:center;color:#2c5f2d;margin-bottom:30px;">ğŸ åº—èˆ—ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - æœ€çµ‚ç‰ˆ</h1>
  <div id="message" style="text-align:center;font-size:18px;padding:20px;background:#fff;border-radius:8px;margin-bottom:20px;">
    ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ä¸­...
  </div>
  <div id="content" style="max-width:1200px;margin:0 auto;"></div>
</div>

<script type="text/javascript">
(function() {
  console.log('=== æœ€çµ‚ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ é–‹å§‹ 2025/09/04 ===');
  
  var messageEl = document.getElementById('message');
  var contentEl = document.getElementById('content');
  
  function updateMessage(text) {
    console.log('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:', text);
    messageEl.innerHTML = text;
  }
  
  function showError(error) {
    console.error('ã‚¨ãƒ©ãƒ¼:', error);
    updateMessage('âŒ ã‚¨ãƒ©ãƒ¼: ' + error);
  }
  
  function loadShops() {
    updateMessage('ğŸ”„ åº—èˆ—ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...');
    
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'https://gf-fes-api.bettger1000.workers.dev/api/shops', true);
    xhr.onreadystatechange = function() {
      if (xhr.readyState === 4) {
        if (xhr.status === 200) {
          try {
            var shops = JSON.parse(xhr.responseText);
            console.log('å–å¾—æˆåŠŸ:', shops.length, 'ä»¶ã®åº—èˆ—');
            displayShops(shops);
          } catch (e) {
            showError('JSONãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼: ' + e.message);
          }
        } else {
          showError('APIå‘¼ã³å‡ºã—ã‚¨ãƒ©ãƒ¼: HTTP ' + xhr.status);
        }
      }
    };
    xhr.send();
  }
  
  function displayShops(shops) {
    if (!shops || shops.length === 0) {
      showError('åº—èˆ—ãƒ‡ãƒ¼ã‚¿ãŒç©ºã§ã™');
      return;
    }
    
    updateMessage('âœ… ' + shops.length + 'ä»¶ã®åº—èˆ—ã‚’è¡¨ç¤ºä¸­');
    
    var html = '';
    for (var i = 0; i < shops.length; i++) {
      var shop = shops[i];
      console.log('åº—èˆ— ' + (i+1) + ':', shop.name);
      
      html += '<div style="background:white;border:2px solid #ddd;margin:15px 0;padding:20px;border-radius:10px;box-shadow:0 2px 4px rgba(0,0,0,0.1);">';
      html += '<h2 style="color:#2c5f2d;margin:0 0 15px 0;font-size:24px;">' + (shop.name || 'åç§°æœªè¨­å®š') + '</h2>';
      
      html += '<div style="margin:8px 0;font-size:16px;color:#555;">';
      html += '<strong>ğŸ“ ä½æ‰€:</strong> ' + (shop.address || 'ä½æ‰€æœªè¨­å®š');
      html += '</div>';
      
      if (shop.category && Array.isArray(shop.category)) {
        html += '<div style="margin:8px 0;font-size:16px;color:#555;">';
        html += '<strong>ğŸ·ï¸ ã‚«ãƒ†ã‚´ãƒª:</strong> ' + shop.category.join(', ');
        html += '</div>';
      }
      
      if (shop.targetCustomer) {
        html += '<div style="margin:8px 0;font-size:16px;color:#555;">';
        html += '<strong>ğŸ¯ å¯¾è±¡é¡§å®¢:</strong> ' + shop.targetCustomer;
        html += '</div>';
      }
      
      if (shop.concept) {
        html += '<div style="background:#f0f8f0;padding:15px;margin:15px 0;border-radius:8px;border-left:4px solid #2c5f2d;">';
        html += '<strong>ğŸ’¡ ã‚³ãƒ³ã‚»ãƒ—ãƒˆ:</strong><br>' + shop.concept;
        html += '</div>';
      }
      
      html += '</div>';
    }
    
    contentEl.innerHTML = html;
    console.log('âœ… å…¨åº—èˆ—è¡¨ç¤ºå®Œäº†');
  }
  
  // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†å¾Œã«å®Ÿè¡Œ
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', loadShops);
  } else {
    loadShops();
  }
})();
</script>

</body>
</html>