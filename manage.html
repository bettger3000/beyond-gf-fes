<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>åº—èˆ—ãƒ‡ãƒ¼ã‚¿ç®¡ç†</title>
</head>
<body>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: sans-serif; background: #f5f5f5; padding: 20px; }
h1 { text-align: center; color: #2c5f2d; margin-bottom: 30px; }
.container { max-width: 1200px; margin: 0 auto; }
.status { text-align: center; padding: 20px; font-size: 18px; }
.shop-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px; }
.shop { background: white; padding: 20px; border-radius: 8px; border: 2px solid #ddd; }
.shop h3 { color: #2c5f2d; margin-bottom: 10px; }
.shop p { margin: 8px 0; color: #666; }
.concept { background: #f0f8f0; padding: 10px; margin-top: 10px; border-radius: 5px; font-style: italic; }
</style>

<div class="container">
  <h1>ğŸ åº—èˆ—ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </h1>
  <div id="status" class="status">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</div>
  <div id="content" class="shop-grid"></div>
</div>

<script>
(function() {
  console.log('æ–°ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ é–‹å§‹');
  
  var xhr = new XMLHttpRequest();
  xhr.open('GET', 'https://gf-fes-api.bettger1000.workers.dev/api/shops', true);
  
  xhr.onreadystatechange = function() {
    if (xhr.readyState === 4) {
      if (xhr.status === 200) {
        try {
          var shops = JSON.parse(xhr.responseText);
          console.log('åº—èˆ—å–å¾—æˆåŠŸ:', shops.length);
          showShops(shops);
        } catch (e) {
          showError('ãƒ‡ãƒ¼ã‚¿è§£æã‚¨ãƒ©ãƒ¼');
        }
      } else {
        showError('é€šä¿¡ã‚¨ãƒ©ãƒ¼: ' + xhr.status);
      }
    }
  };
  
  xhr.send();
  
  function showShops(shops) {
    document.getElementById('status').innerHTML = 'âœ… ' + shops.length + 'ä»¶ã®åº—èˆ—ã‚’è¡¨ç¤ºä¸­';
    
    var html = '';
    for (var i = 0; i < shops.length; i++) {
      var shop = shops[i];
      html += '<div class="shop">';
      html += '<h3>' + shop.name + '</h3>';
      html += '<p>ğŸ“ ' + (shop.address || 'ä½æ‰€æœªè¨­å®š') + '</p>';
      
      if (shop.category && shop.category.length > 0) {
        html += '<p>ğŸ·ï¸ ' + shop.category.join(', ') + '</p>';
      }
      
      if (shop.targetCustomer) {
        html += '<p>ğŸ¯ ' + shop.targetCustomer + '</p>';
      }
      
      if (shop.concept) {
        html += '<div class="concept">' + shop.concept + '</div>';
      }
      
      html += '</div>';
    }
    
    document.getElementById('content').innerHTML = html;
  }
  
  function showError(msg) {
    document.getElementById('status').innerHTML = 'âŒ ' + msg;
  }
})();
</script>

</body>
</html>