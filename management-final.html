<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ğŸ åº—èˆ—ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€å®Œå…¨ç‰ˆã€‘</title></head><body style="margin:0;padding:0;font-family:'Hiragino Sans','Yu Gothic',Arial,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px;">

<div style="max-width:1500px;margin:0 auto;background:white;border-radius:20px;overflow:hidden;box-shadow:0 20px 40px rgba(0,0,0,0.3);">

<div style="background:linear-gradient(135deg,#2c5f2d 0%,#4a7c59 100%);color:white;padding:40px;text-align:center;">
<h1 style="font-size:36px;font-weight:bold;margin:0 0 10px 0;">ğŸ åº—èˆ—ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€å®Œå…¨ç‰ˆã€‘</h1>
<p style="font-size:18px;opacity:0.9;margin:0;">ãƒ“ãƒ¨ãƒ³ãƒ‰ã‚°ãƒ«ãƒ†ãƒ³ãƒ•ãƒªãƒ¼ç¥­ã‚Š 2025 - å…¨ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º</p>
</div>

<div style="padding:40px;text-align:center;border-bottom:3px solid #f0f0f0;">
<div id="status" style="background:linear-gradient(135deg,#ffecd2 0%,#fcb69f 100%);color:#d2691e;padding:25px;border-radius:15px;font-size:22px;font-weight:bold;">
<span style="display:inline-block;width:30px;height:30px;border:4px solid #f3f3f3;border-top:4px solid #2c5f2d;border-radius:50%;animation:spin 1s linear infinite;margin-right:15px;"></span>
åº—èˆ—ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºå®Ÿã«èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...
</div>
</div>

<div id="shops" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(500px,1fr));gap:30px;padding:40px;"></div>

</div>

<style>
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
.shop-card { background:linear-gradient(135deg,#ffffff 0%,#f8f9fa 100%); border:3px solid #2c5f2d; border-radius:20px; padding:30px; box-shadow:0 10px 25px rgba(44,95,45,0.15); transition:all 0.3s ease; position:relative; overflow:hidden; }
.shop-card::before { content:''; position:absolute; top:0; left:0; right:0; height:5px; background:linear-gradient(90deg,#2c5f2d,#4a7c59); }
.shop-card:hover { transform:translateY(-10px); box-shadow:0 15px 35px rgba(44,95,45,0.25); }
.shop-top { display:flex; justify-content:space-between; align-items:center; margin-bottom:25px; padding-bottom:20px; border-bottom:3px solid #f0f0f0; }
.shop-name { font-size:26px; font-weight:bold; color:#2c5f2d; margin:0; }
.shop-badge { background:linear-gradient(135deg,#2c5f2d,#4a7c59); color:white; padding:8px 16px; border-radius:20px; font-size:14px; font-weight:bold; }
.info-line { display:flex; align-items:flex-start; margin:15px 0; font-size:16px; }
.info-icon { margin-right:12px; font-size:20px; min-width:30px; flex-shrink:0; }
.info-content { color:#444; line-height:1.6; flex:1; }
.tags-area { display:flex; flex-wrap:wrap; gap:10px; margin:20px 0; }
.tag-item { background:linear-gradient(135deg,#74b9ff,#0984e3); color:white; padding:6px 14px; border-radius:15px; font-size:14px; font-weight:600; }
.concept-section { background:linear-gradient(135deg,#e8f5e8,#d1f2d1); padding:20px; border-radius:15px; margin:20px 0; border-left:5px solid #2c5f2d; font-style:italic; color:#2c5f2d; line-height:1.7; }
.menu-area { margin-top:25px; padding-top:25px; border-top:3px solid #f0f0f0; }
.menu-header { font-size:18px; font-weight:bold; color:#2c5f2d; margin-bottom:15px; }
.menu-entry { background:linear-gradient(135deg,#ffeaa7,#fab1a0); padding:12px 18px; margin:8px 0; border-radius:10px; font-size:15px; color:#2d3436; }
.status-success { background:linear-gradient(135deg,#a8e6cf 0%,#7fcdcd 100%); color:#2e7d32; padding:25px; border-radius:15px; font-size:24px; font-weight:bold; }
.status-error { background:linear-gradient(135deg,#ffb3ba 0%,#ff9999 100%); color:#c62828; padding:25px; border-radius:15px; font-size:22px; font-weight:bold; }
</style>

<script>
console.log('ğŸš€ å®Œå…¨ç‰ˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•');
console.log('æ™‚åˆ»:', new Date().toLocaleString('ja-JP'));

var statusDiv = document.getElementById('status');
var shopsDiv = document.getElementById('shops');
var API = 'https://gf-fes-api.bettger1000.workers.dev/api/shops';

console.log('ğŸŒ API:', API);

fetchData();

function fetchData() {
  console.log('ğŸ“¡ ãƒ‡ãƒ¼ã‚¿å–å¾—é–‹å§‹');
  
  var xhr = new XMLHttpRequest();
  xhr.open('GET', API, true);
  xhr.timeout = 30000;
  
  xhr.onreadystatechange = function() {
    if (xhr.readyState === 4) {
      console.log('ğŸ“Š å¿œç­”å®Œäº† - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:', xhr.status);
      
      if (xhr.status === 200) {
        try {
          var shops = JSON.parse(xhr.responseText);
          console.log('âœ… è§£ææˆåŠŸ');
          console.log('ğŸ“ˆ åº—èˆ—æ•°:', shops.length);
          console.log('ğŸª åº—èˆ—å:', shops.map(function(s) { return s.name; }));
          showShops(shops);
        } catch (e) {
          console.error('âŒ JSONè§£æã‚¨ãƒ©ãƒ¼:', e);
          showError('JSONè§£æå¤±æ•—: ' + e.message);
        }
      } else {
        console.error('âŒ HTTPã‚¨ãƒ©ãƒ¼:', xhr.status);
        showError('HTTPã‚¨ãƒ©ãƒ¼: ' + xhr.status);
      }
    }
  };
  
  xhr.onerror = function() {
    console.error('âŒ é€šä¿¡ã‚¨ãƒ©ãƒ¼');
    showError('ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€šä¿¡ã‚¨ãƒ©ãƒ¼');
  };
  
  xhr.ontimeout = function() {
    console.error('âŒ ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ');
    showError('30ç§’ã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ');
  };
  
  xhr.send();
}

function showShops(shops) {
  if (!Array.isArray(shops) || shops.length === 0) {
    showError('åº—èˆ—ãƒ‡ãƒ¼ã‚¿ãŒç©º');
    return;
  }
  
  console.log('ğŸ¨ ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é–‹å§‹');
  
  statusDiv.className = 'status-success';
  statusDiv.innerHTML = 'ğŸ‰ ' + shops.length + 'åº—èˆ—ã®ãƒ‡ãƒ¼ã‚¿ã‚’å®Œå…¨è¡¨ç¤ºä¸­ï¼';
  
  var html = '';
  
  for (var i = 0; i < shops.length; i++) {
    var shop = shops[i];
    var num = i + 1;
    console.log('ğŸª å‡¦ç†ä¸­ ' + num + ': ' + (shop.name || 'åå‰ãªã—'));
    html += buildShop(shop, num);
  }
  
  shopsDiv.innerHTML = html;
  console.log('âœ¨ å…¨åº—èˆ—è¡¨ç¤ºå®Œäº†ï¼');
}

function buildShop(shop, number) {
  var html = '<div class="shop-card">';
  
  html += '<div class="shop-top">';
  html += '<h2 class="shop-name">' + escape(shop.name || 'åº—èˆ—' + number) + '</h2>';
  html += '<span class="shop-badge">' + escape(shop.id || '#' + number) + '</span>';
  html += '</div>';
  
  if (shop.address) {
    html += '<div class="info-line">';
    html += '<span class="info-icon">ğŸ“</span>';
    html += '<span class="info-content"><strong>ä½æ‰€:</strong> ' + escape(shop.address) + '</span>';
    html += '</div>';
  }
  
  if (shop.category && shop.category.length) {
    html += '<div class="info-line">';
    html += '<span class="info-icon">ğŸ·ï¸</span>';
    html += '<div class="tags-area">';
    for (var j = 0; j < shop.category.length; j++) {
      html += '<span class="tag-item">' + escape(shop.category[j]) + '</span>';
    }
    html += '</div>';
    html += '</div>';
  }
  
  if (shop.targetCustomer) {
    html += '<div class="info-line">';
    html += '<span class="info-icon">ğŸ¯</span>';
    html += '<span class="info-content"><strong>å¯¾è±¡:</strong> ' + escape(shop.targetCustomer) + '</span>';
    html += '</div>';
  }
  
  if (shop.short) {
    html += '<div class="info-line">';
    html += '<span class="info-icon">â­</span>';
    html += '<span class="info-content"><strong>ç‰¹å¾´:</strong> ' + escape(shop.short) + '</span>';
    html += '</div>';
  }
  
  if (shop.concept) {
    html += '<div class="concept-section">';
    html += '<strong>ğŸ’¡ ã‚³ãƒ³ã‚»ãƒ—ãƒˆ:</strong><br>' + escape(shop.concept);
    html += '</div>';
  }
  
  if (shop.menu && shop.menu.length) {
    html += '<div class="menu-area">';
    html += '<div class="menu-header">ğŸ½ï¸ æä¾›ãƒ¡ãƒ‹ãƒ¥ãƒ¼</div>';
    for (var k = 0; k < shop.menu.length; k++) {
      var item = shop.menu[k];
      html += '<div class="menu-entry">';
      html += escape(item.name || 'å•†å“');
      if (item.price) html += ' - <strong>' + escape(item.price) + '</strong>';
      html += '</div>';
    }
    html += '</div>';
  }
  
  html += '</div>';
  return html;
}

function showError(msg) {
  statusDiv.className = 'status-error';
  statusDiv.innerHTML = 'ğŸ’¥ ' + escape(msg);
  shopsDiv.innerHTML = '';
}

function escape(str) {
  if (typeof str !== 'string') return '';
  return str
    .replace(/&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#039;');
}
</script>

</body></html>