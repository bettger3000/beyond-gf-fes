<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>åº—èˆ—ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - ã‚·ãƒ³ãƒ—ãƒ«ç‰ˆ</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
    .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    h1 { color: #2c5f2d; margin-bottom: 30px; text-align: center; }
    .nav { display: flex; gap: 10px; margin-bottom: 30px; }
    .btn { background: #2c5f2d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
    .btn:hover { background: #1a3a1b; }
    .btn-add { background: #007bff; }
    .btn-export { background: #28a745; }
    .section { display: none; }
    .section.active { display: block; }
    .form-group { margin-bottom: 15px; }
    .form-group label { display: block; font-weight: bold; margin-bottom: 5px; }
    .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
    .form-group textarea { height: 80px; resize: vertical; }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .shops-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
    .shop-card { border: 1px solid #ddd; border-radius: 8px; padding: 20px; background: white; }
    .shop-card h3 { color: #2c5f2d; margin-bottom: 10px; }
    .shop-actions { margin-top: 15px; }
    .btn-edit { background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; margin-right: 5px; }
    .btn-delete { background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; }
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; }
    .modal-content { background: white; width: 90%; max-width: 600px; margin: 50px auto; padding: 30px; border-radius: 10px; max-height: 80vh; overflow-y: auto; }
    .modal-close { float: right; font-size: 24px; cursor: pointer; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ åº—èˆ—ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </h1>
    
    <div class="nav">
      <button class="btn" onclick="showSection('list')">ğŸ“‹ åº—èˆ—ä¸€è¦§</button>
      <button class="btn btn-add" onclick="showSection('add')">â• æ–°è¦ç™»éŒ²</button>
      <button class="btn btn-export" onclick="exportData()">ğŸ’¾ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
    </div>
    
    <!-- åº—èˆ—ä¸€è¦§ -->
    <div id="section-list" class="section active">
      <h2>åº—èˆ—ä¸€è¦§</h2>
      <div id="shops-grid" class="shops-grid"></div>
    </div>
    
    <!-- æ–°è¦ç™»éŒ² -->
    <div id="section-add" class="section">
      <h2>æ–°è¦åº—èˆ—ç™»éŒ²</h2>
      <form id="add-form">
        <div class="form-row">
          <div class="form-group">
            <label>åº—èˆ—å *</label>
            <input type="text" id="add-name" required>
          </div>
          <div class="form-group">
            <label>ç°¡æ½”ãªèª¬æ˜</label>
            <input type="text" id="add-short">
          </div>
        </div>
        
        <div class="form-group">
          <label>ã‚³ãƒ³ã‚»ãƒ—ãƒˆ</label>
          <textarea id="add-concept"></textarea>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>ã‚«ãƒ†ã‚´ãƒª</label>
            <select id="add-category">
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="ã‚¹ã‚¤ãƒ¼ãƒ„">ã‚¹ã‚¤ãƒ¼ãƒ„</option>
              <option value="ãƒ‘ãƒ³">ãƒ‘ãƒ³</option>
              <option value="é£Ÿäº‹">é£Ÿäº‹</option>
              <option value="ãƒ‰ãƒªãƒ³ã‚¯">ãƒ‰ãƒªãƒ³ã‚¯</option>
              <option value="ã‚«ãƒ•ã‚§">ã‚«ãƒ•ã‚§</option>
            </select>
          </div>
          <div class="form-group">
            <label>ã‚¿ã‚°</label>
            <input type="text" id="add-tags" placeholder="ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›">
          </div>
        </div>
        
        <div class="form-group">
          <label>ä½æ‰€</label>
          <input type="text" id="add-address">
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ</label>
            <input type="url" id="add-website">
          </div>
          <div class="form-group">
            <label>Instagram</label>
            <input type="url" id="add-instagram">
          </div>
        </div>
        
        <button type="submit" class="btn">ğŸ’¾ ç™»éŒ²ã™ã‚‹</button>
      </form>
    </div>
  </div>
  
  <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="edit-modal" class="modal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeEditModal()">&times;</span>
      <h2>åº—èˆ—ç·¨é›†</h2>
      <form id="edit-form">
        <input type="hidden" id="edit-id">
        
        <div class="form-row">
          <div class="form-group">
            <label>åº—èˆ—å *</label>
            <input type="text" id="edit-name" required>
          </div>
          <div class="form-group">
            <label>ç°¡æ½”ãªèª¬æ˜</label>
            <input type="text" id="edit-short">
          </div>
        </div>
        
        <div class="form-group">
          <label>ã‚³ãƒ³ã‚»ãƒ—ãƒˆ</label>
          <textarea id="edit-concept"></textarea>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>ã‚«ãƒ†ã‚´ãƒª</label>
            <select id="edit-category">
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="ã‚¹ã‚¤ãƒ¼ãƒ„">ã‚¹ã‚¤ãƒ¼ãƒ„</option>
              <option value="ãƒ‘ãƒ³">ãƒ‘ãƒ³</option>
              <option value="é£Ÿäº‹">é£Ÿäº‹</option>
              <option value="ãƒ‰ãƒªãƒ³ã‚¯">ãƒ‰ãƒªãƒ³ã‚¯</option>
              <option value="ã‚«ãƒ•ã‚§">ã‚«ãƒ•ã‚§</option>
            </select>
          </div>
          <div class="form-group">
            <label>ã‚¿ã‚°</label>
            <input type="text" id="edit-tags" placeholder="ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›">
          </div>
        </div>
        
        <div class="form-group">
          <label>ä½æ‰€</label>
          <input type="text" id="edit-address">
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label>ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ</label>
            <input type="url" id="edit-website">
          </div>
          <div class="form-group">
            <label>Instagram</label>
            <input type="url" id="edit-instagram">
          </div>
        </div>
        
        <button type="submit" class="btn">ğŸ’¾ æ›´æ–°ã™ã‚‹</button>
      </form>
    </div>
  </div>
  
  <script>
    let shops = JSON.parse(localStorage.getItem('shops') || '[]');
    
    // åˆæœŸåŒ–
    window.onload = function() {
      displayShops();
      
      document.getElementById('add-form').addEventListener('submit', function(e) {
        e.preventDefault();
        addShop();
      });
      
      document.getElementById('edit-form').addEventListener('submit', function(e) {
        e.preventDefault();
        updateShop();
      });
    };
    
    // ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
    function showSection(section) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById('section-' + section).classList.add('active');
    }
    
    // åº—èˆ—ä¸€è¦§è¡¨ç¤º
    function displayShops() {
      const grid = document.getElementById('shops-grid');
      
      if (shops.length === 0) {
        grid.innerHTML = '<p>ã¾ã åº—èˆ—ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>';
        return;
      }
      
      grid.innerHTML = shops.map(shop => `
        <div class="shop-card">
          <h3>${shop.name}</h3>
          <p><strong>ã‚«ãƒ†ã‚´ãƒª:</strong> ${shop.category || 'æœªè¨­å®š'}</p>
          <p><strong>ç°¡æ½”ãªèª¬æ˜:</strong> ${shop.short || 'æœªè¨­å®š'}</p>
          <p><strong>ä½æ‰€:</strong> ${shop.address || 'æœªè¨­å®š'}</p>
          ${shop.tags ? `<p><strong>ã‚¿ã‚°:</strong> ${shop.tags}</p>` : ''}
          <div class="shop-actions">
            <button class="btn-edit" onclick="editShop(${shop.id})">âœ‚ï¸ ç·¨é›†</button>
            <button class="btn-delete" onclick="deleteShop(${shop.id})">ğŸ—‘ï¸ å‰Šé™¤</button>
          </div>
        </div>
      `).join('');
    }
    
    // åº—èˆ—è¿½åŠ 
    function addShop() {
      const name = document.getElementById('add-name').value.trim();
      if (!name) {
        alert('åº—èˆ—åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }
      
      const shop = {
        id: Date.now(),
        name: name,
        short: document.getElementById('add-short').value.trim(),
        concept: document.getElementById('add-concept').value.trim(),
        category: document.getElementById('add-category').value,
        tags: document.getElementById('add-tags').value.trim(),
        address: document.getElementById('add-address').value.trim(),
        website: document.getElementById('add-website').value.trim(),
        instagram: document.getElementById('add-instagram').value.trim()
      };
      
      shops.push(shop);
      localStorage.setItem('shops', JSON.stringify(shops));
      
      document.getElementById('add-form').reset();
      displayShops();
      alert('âœ… åº—èˆ—ã‚’ç™»éŒ²ã—ã¾ã—ãŸï¼');
      showSection('list');
    }
    
    // åº—èˆ—ç·¨é›†
    function editShop(id) {
      const shop = shops.find(s => s.id === id);
      if (!shop) return;
      
      document.getElementById('edit-id').value = shop.id;
      document.getElementById('edit-name').value = shop.name;
      document.getElementById('edit-short').value = shop.short || '';
      document.getElementById('edit-concept').value = shop.concept || '';
      document.getElementById('edit-category').value = shop.category || '';
      document.getElementById('edit-tags').value = shop.tags || '';
      document.getElementById('edit-address').value = shop.address || '';
      document.getElementById('edit-website').value = shop.website || '';
      document.getElementById('edit-instagram').value = shop.instagram || '';
      
      document.getElementById('edit-modal').style.display = 'block';
    }
    
    // åº—èˆ—æ›´æ–°
    function updateShop() {
      const id = parseInt(document.getElementById('edit-id').value);
      const name = document.getElementById('edit-name').value.trim();
      
      if (!name) {
        alert('åº—èˆ—åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }
      
      const shopIndex = shops.findIndex(s => s.id === id);
      if (shopIndex === -1) return;
      
      shops[shopIndex] = {
        id: id,
        name: name,
        short: document.getElementById('edit-short').value.trim(),
        concept: document.getElementById('edit-concept').value.trim(),
        category: document.getElementById('edit-category').value,
        tags: document.getElementById('edit-tags').value.trim(),
        address: document.getElementById('edit-address').value.trim(),
        website: document.getElementById('edit-website').value.trim(),
        instagram: document.getElementById('edit-instagram').value.trim()
      };
      
      localStorage.setItem('shops', JSON.stringify(shops));
      displayShops();
      closeEditModal();
      alert('âœ… åº—èˆ—æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸï¼');
    }
    
    // åº—èˆ—å‰Šé™¤
    function deleteShop(id) {
      const shop = shops.find(s => s.id === id);
      if (!shop) return;
      
      if (!confirm(`ã€Œ${shop.name}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) return;
      
      shops = shops.filter(s => s.id !== id);
      localStorage.setItem('shops', JSON.stringify(shops));
      displayShops();
      alert('âœ… åº—èˆ—ã‚’å‰Šé™¤ã—ã¾ã—ãŸï¼');
    }
    
    // ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
    function closeEditModal() {
      document.getElementById('edit-modal').style.display = 'none';
    }
    
    // ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
    function exportData() {
      if (shops.length === 0) {
        alert('ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“');
        return;
      }
      
      const jsonStr = JSON.stringify(shops, null, 2);
      const blob = new Blob([jsonStr], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      
      const a = document.createElement('a');
      a.href = url;
      a.download = 'shops-' + new Date().toISOString().slice(0,10) + '.json';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      alert(`âœ… ${shops.length}ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ`);
    }
  </script>
</body>
</html>